title: Home
path: home1
panel: true
icon: "mdi:home"
badges: []
cards:
  - type: custom:bootstrap-grid-card
    cards:
      - type: row
        cards:
          - type: col
            class: "col-12 col-md-4"
            cards:
              - type: custom:bootstrap-grid-card
                cards:
                  - type: row
                    cards:
                      - type: markdown
                        style: |
                          ha-card {
                            box-shadow: none;
                            height: 40px;
                            margin-top: 1px;
                            margin-left: 2px;
                            letter-spacing: -1px;
                            overflow: visible;
                            background: none;
                            #font-size: 20px
                          }
                          ha-markdown {
                            padding: 16px 16px 8px 16px;
                          }
                        content: |-
                          Family
                  - type: row
                    cards:
                      - type: custom:decluttering-card
                        template: person
                        class: "col-4"
                        variables:
                          - entity: person.stefanie
                          - occupancy: input_select.stefanie_location
                          - name: Stefanie
                          - picture: /local/stefanie.jpg
                      - type: custom:decluttering-card
                        template: person
                        class: "col-4"
                        variables:
                          - entity: person.richard
                          - occupancy: input_select.richard_location
                          - name: Richard
                          - picture: /local/richard.jpg
                      - type: custom:decluttering-card
                        template: person
                        class: "col-4"
                        variables:
                          - entity: person.jenn
                          - occupancy: input_select.jenn_location
                          - name: Jenn
                          - picture: /local/jenn.jpg
                  - type: row
                    cards:
                      - type: markdown
                        style: |
                          ha-card {
                            box-shadow: none;
                            height: 40px;
                            margin-top: 1px;
                            margin-left: 2px;
                            letter-spacing: -1px;
                            overflow: visible;
                            background: none;
                            #font-size: 20px
                          }
                          ha-markdown {
                            padding: 16px 16px 8px 16px;
                          }
                        content: |-
                          Occupancy
                  - type: row
                    cards:
                      - type: custom:decluttering-card
                        template: motion_sensor
                        variables:
                          - name: Ground Floor
                          - icon: "mdi:run"
                          - offIcon: "mdi:walk"
                          - entity: binary_sensor.main_floor_occupancy
                      # - type: custom:decluttering-card
                      #   template: motion_sensor
                      #   variables:
                      #     - name: First Floor
                      #     - icon: "mdi:run"
                      #     - offIcon: "mdi:walk"
                      #     - entity: binary_sensor.kitchen_occupancy
                      - type: custom:decluttering-card
                        template: motion_sensor
                        variables:
                          - name: Bedroom1
                          - icon: "mdi:run"
                          - offIcon: "mdi:walk"
                          - entity: binary_sensor.area_bedroom_occupied
                      - type: custom:decluttering-card
                        template: motion_sensor
                        variables:
                          - name: Backroom
                          - entity: binary_sensor.unit1_backroom_occupancy
                  ####
                  - type: row
                    cards:
                      - type: custom:auto-entities
                        filter:
                          include:
                            - group: binary_sensor.alarm_sensors
                              state: 'on'
                            - group: binary_sensor.motion_sensors
                              state: 'on'
                        sort_by_level: asc
                        title: Battery Warnings
                        show_empty: true
                        card_param: entities
                        card:
                          type: entities

                        # type: 'custom:auto-entities'
                        # card:
                        #   type: grid
                        #   columns: 2
                        # card_param: cards
                        # filter:
                        #   exclude:
                        #     - name: Weatherbit*
                        #   include:
                        #     - domain: sensor
                        #       attributes:
                        #         icon: 'mdi:thermometer'
                        #       options:
                        #         type: 'custom:mini-graph-card'
                        #         hours_to_show: 48
                        #         update_interval: 60
                        #         height: 200
                        #         entity:
                        #         entities:
                        #           - "this.entity_id"
                        sort_by_level: asc
                        title: Battery Warnings
                      # - type: custom:decluttering-card
                      #   template: motion_sensor
                      #   variables:
                      #     - name: Ground Floor
                      #     - icon: "mdi:run"
                      #     - offIcon: "mdi:walk"
                      #     - entity: binary_sensor.main_floor_occupancy
                      # # - type: custom:decluttering-card
                      # #   template: motion_sensor
                      # #   variables:
                      # #     - name: First Floor
                      # #     - icon: "mdi:run"
                      # #     - offIcon: "mdi:walk"
                      # #     - entity: binary_sensor.kitchen_occupancy
                      # - type: custom:decluttering-card
                      #   template: motion_sensor
                      #   variables:
                      #     - name: Kitchen
                      #     - icon: "mdi:run"
                      #     - offIcon: "mdi:walk"
                      #     - entity: binary_sensor.main_floor_occupancy
                      # - type: custom:decluttering-card
                      #   template: motion_sensor
                      #   variables:
                      #     - name: Backroom
                      #     - entity: binary_sensor.unit1_backroom_occupancy

              ####
              - type: "custom:homekit-card"
                horizontalScroll: true
                statePositionTop: true
                useBrightness: false
                useTemperature: false
                enableColumns: true
                tileHoldAnimation: false
                panel: true
                home: false
                style: |
                  :host {
                    --tile-background: rgba(230, 230, 228, 0.5);
                    --tile-border-radius: 12px;
                    --tile-width: 100px;
                    --tile-height: 100px;
                    --tile-on-background: rgba(255, 255, 255, 1);
                    --tile-name-text-color: rgba(0, 0, 0, 0.3);
                    --tile-on-name-text-color: rgba(0, 0, 0, 1);
                    --tile-state-text-color: rgba(0, 0, 0, 0.3);
                    --tile-on-state-text-color: rgba(0, 0, 0, 1);
                    --tile-state-changed-text-color: rgb(50, 50, 50, 1);
                    --tile-unavailable-state-text-color: rgba(255, 0, 0, 0.25);
                    --tile-value-text-color: rgba(0, 0, 0, 1);
                    --tile-value-text-font-size: 12px;
                    --tile-icon-color: rgba(0, 0, 0, 0.25);
                    --tile-on-icon-color: #f7d959;
                    --tile-width-mobile: 90px;
                    --tile-height-mobile: 90px;
                    --min-header-height: 150px;
                    --tile-icon-size: 36px;
                    --tile-image-radius: 0%
                  }
                rows:
                  - row: 3
                    columns:
                      - column: 1
                        entities:
                          - entities:
                              - card: weather-forecast
                                cardOptions:
                                  entity: weather.home
                                cardStyle: |
                                  ha-card {
                                      padding: 5px!important;
                                      display: flex!important;
                                      flex-direction: column!important;
                                      background: transparent!important;
                                      box-shadow: none!important;
                                      border-radius:0!important;
                                  }
                                  .content {
                                      display: flex!important;
                                      flex-direction: row!important;
                                  }
                                  .icon-image {
                                      min-width: auto!important;
                                  }
                                  .icon-image > * {
                                      height: 33px!important;
                                      flex: 0 0 33px!important;
                                  }
                                  .info .name-state {
                                      font-weight: 600;
                                      padding:0!important;
                                  }
                                  .info .name-state .state {
                                      font-size:14px!important;
                                      text-align:left;
                                      padding: 5px!important;
                                  }
                                  .info .name-state .name {
                                      font-size:0px!important;
                                  }
                                  .info .temp-attribute {
                                      width:100%;
                                      font-weight: 600;
                                  }
                                  .info .temp-attribute .temp {
                                      font-size: 14px!important;
                                  }
                                  .info .temp-attribute .temp span {
                                      font-size: 12px!important;
                                  }
                                  .forecast {
                                      font-size: 12px!important;
                                      padding-top: 2px!important;
                                  }
                                  .forecast-image-icon {
                                      padding:0!important;
                                  }
                                  .forecast-image-icon > * {
                                      width:20px!important;
                                      height:20px!important;
                                      margin: 0 auto!important;
                                  }
                                  .forecast .temp {
                                      margin-top:0!important;
                                      font-size:12px!important;
                                  }
                                  .forecast .templow {
                                      display:none;
                                  }
                                nopaddign: true
                                higher: true
                                higherSize: 1
                                wider: true
                                widerSize: 3
                            title: Weather
          - type: col
            class: "col-6 col-md-8"
            cards:
              - type: "custom:homekit-card"
                title: Home
                titleColor: "#000"
                horizontalScroll: true
                statePositionTop: true
                useBrightness: false
                useTemperature: false
                enableColumns: true
                tileHoldAnimation: false
                panel: true
                home: false
                # style: |
                #   :host {
                #     --tile-background: rgba(230, 230, 228, 0.5);
                #     --tile-border-radius: 12px;
                #     --tile-width: 100px;
                #     --tile-height: 100px;
                #     --tile-on-background: rgba(255, 255, 255, 1);
                #     --tile-name-text-color: rgba(0, 0, 0, 0.3);
                #     --tile-on-name-text-color: rgba(0, 0, 0, 1);
                #     --tile-state-text-color: rgba(0, 0, 0, 0.3);
                #     --tile-on-state-text-color: rgba(0, 0, 0, 1);
                #     --tile-state-changed-text-color: rgb(50, 50, 50, 1);
                #     --tile-unavailable-state-text-color: rgba(255, 0, 0, 0.25);
                #     --tile-value-text-color: rgba(0, 0, 0, 1);
                #     --tile-value-text-font-size: 12px;
                #     --tile-icon-color: rgba(0, 0, 0, 0.25);
                #     --tile-on-icon-color: #f7d959;
                #     --tile-width-mobile: 90px;
                #     --tile-height-mobile: 90px;
                #     --min-header-height: 150px;
                #     --tile-icon-size: 36px;
                #     --tile-image-radius: 0%
                #   }
                rows:
                  - row: 1
                    columns:
                      - column: 2
                        entities:
                          - entities:
                              - custom: lights
                                name: Lights
                                icon: mdi:lightbulb-group
                                tap_action:
                                  action: fire-dom-event
                                  browser_mod:
                                    command: popup
                                    title: Lights
                                    large: true
                                    hide_header: false
                                    card:
                                      type: custom:decluttering-card
                                      template: popup_lights_downstairs
                              - entity: light.frontroom_ceiling
                                icon: "mdi:lightbulb-group"
                                name: Downstairs Lights
                                popupExtend:
                                  settingsCard:
                                    type: "custom:light-popup-card"
                                    cardOptions:
                                      entity: this
                                      persist_features: true
                                      smooth_color_wheel: true
                                      child_card: true
                                      consolidate_entities: true
                                  actions:
                                    - color: "#FFDABB"
                                      name: Bright
                                      service: scene.turn_on
                                      service_data:
                                        entity_id: scene.living_bright_lights
                                    - color: "#FFC18D"
                                      name: Classic
                                      service: scene.turn_on
                                      service_data:
                                        entity_id: scene.living_classic_lights
                                    - color: "#FFAA5F"
                                      name: Soft
                                      service: scene.turn_on
                                      service_data:
                                        entity_id: scene.living_soft_lights
                                    - color: "#FF9B3D"
                                      name: Relax
                                      service: scene.turn_on
                                      service_data:
                                        entity_id: scene.living_relax_lights
                              - custom: lights
                                name: Upstairs Lights
                                icon: "mdi:lightbulb-group"
                                tap_action:
                                  action: fire-dom-event
                                  browser_mod:
                                    command: popup
                                    title: Lights
                                    large: true
                                    hide_header: false
                                    card:
                                      type: custom:decluttering-card
                                      template: popup_lights_upstairs
                            popup:
                              type: custom:light-popup-card
                              icon: "mdi:lightbulb-group"
                              actionsInARow: 2
                              scenesInARow: 2
                              brightnessWidth: 130px
                              brightnessHeight: 360px
                              borderRadius: 1.75em
                              switchWidth: 130px
                              switchHeight: 360px
                              sliderColor: "#eee"
                              sliderThumbColor: "rgba(100, 100, 100, 0.9)"
                              sliderTrackColor: "rgba(100, 100, 100, 0.9)"
                              fullscreen: true
                              settings: true
                            title: Lights

              - type: "custom:homekit-card"
                horizontalScroll: true
                statePositionTop: true
                useBrightness: false
                useTemperature: false
                enableColumns: true
                tileHoldAnimation: false
                panel: true
                home: false
                rows:
                  - row: 2
                    columns:
                      - column: 3
                        entities:
                          - entities:
                              - entity: binary_sensor.cat_needs_feeding
                                name: Feed Cat
                                icon: hass:cat
                                tap_action:
                                  action: call-service
                                  service: automation.trigger
                                  service_data:
                                    entity_id: automation.cat_has_been_fed
                              - entity: alert.basement_sumppump_not_running
                                name: Sump Problem
                                hide: >
                                  [[[
                                    return states['alert.basement_sumppump_not_running'].state == 'idle'
                                  ]]]
                              - entity: alert.bedroom1_humidity
                                hide: >
                                  [[[
                                    return states['alert.bedroom1_humidity'].state == 'idle'
                                  ]]]
                              - entity: alert.bedroom2_humidity
                                hide: >
                                  [[[
                                    return states['alert.bedroom2_humidity'].state == 'idle'
                                  ]]]
                              - entity: alert.livingroom1_humidity
                                hide: >
                                  [[[
                                    return states['alert.livingroom1_humidity'].state == 'idle'
                                  ]]]
                              - entity: alert.basement_mold_warning
                                hide: >
                                  [[[
                                    return states['alert.basement_mold_warning'].state == 'idle'
                                  ]]]
                              - custom: batteries
                                name: Batteries
                                icon: mdi:battery-outline
                                tap_action:
                                  action: fire-dom-event
                                  browser_mod:
                                    command: popup
                                    title: Batteries
                                    large: true
                                    hide_header: false
                                    card:
                                      type: custom:decluttering-card
                                      template: popup_batteries
                            title: Alerts
              - type: "custom:homekit-card"
                horizontalScroll: true
                statePositionTop: true
                useBrightness: false
                useTemperature: false
                enableColumns: true
                tileHoldAnimation: false
                panel: true
                home: false
                rows:
                  - row: 2
                    columns:
                      - column: 1
                        entities:
                          - title: Testing
                            entities:
                              - card: custom:decluttering-card
                                cardOptions:
                                  template: popup_environment
                                  # variables:
                                  #   - temperature_entity: sensor.multisensor_air_temperature
                                  #   - humidity_entity: sensor.multisensor_air_temperature
                                wider: true
                                widerSize: 4
                  - row: 3
                    columns:
                      - column: 2
                        entities:
                          - entities:
                              - custom: environment
                                name: Climate
                                icon: mdi:air-filter
                                tap_action:
                                  action: fire-dom-event
                                  browser_mod:
                                    command: popup
                                    title: Household Climate
                                    large: true
                                    hide_header: false
                                    card:
                                      type: custom:decluttering-card
                                      template: popup_environment
                              - custom: lights
                                name: Lights
                                icon: mdi:lightbulb-group
                                tap_action:
                                  action: fire-dom-event
                                  browser_mod:
                                    command: popup
                                    title: Lights
                                    large: true
                                    hide_header: false
                                    card:
                                      type: custom:decluttering-card
                                      template: popup_lights
                              - custom: admin
                                tap_action:
                                  action: call-service
                                  service: browser_mod.popup
                                  service_data:
                                    title: Admin
                                    card:
                                      type: custom:decluttering-card
                                      template: popup_admin
                                  target: {}
                                name: Admin
                                icon: mdi:account-supervisor-circle-outline
                                entity: light.unit1_livingroom_lamp
                              - custom: stats
                                tap_action:
                                  action: call-service
                                  service: browser_mod.popup
                                  service_data:
                                    title: Basement
                                    card:
                                      type: vertical-stack
                                      cards:
                                        - type: entities
                                          entities:
                                            - entity: >-
                                                binary_sensor.basement_door_access_control_window_door_is_open
                                              icon: mdi:bed
                                              type: custom:multiple-entity-row
                                              name: Basement
                                              state_header: Occupancy
                                              state_color: true
                                              show_state: false
                                              entities:
                                                - entity: sensor.basement_temperature
                                                  name: Temperature
                                                - entity: sensor.multisensor_bedroom1_illuminance
                                                  name: Illuminance
                                        - type: horizontal-stack
                                          cards:
                                            - align_icon: left
                                              align_state: center
                                              entities:
                                                - sensor.main_pump_running
                                              font_size: 75
                                              name: Today
                                              show:
                                                fill: false
                                              type: custom:mini-graph-card
                                            - align_icon: left
                                              align_state: center
                                              entities:
                                                - sensor.main_pump_3day_cycles
                                              font_size: 75
                                              name: 3 days
                                              show:
                                                fill: false
                                              type: custom:mini-graph-card
                                            - align_icon: left
                                              align_state: center
                                              entities:
                                                - sensor.main_pump_30day_cycles
                                              font_size: 75
                                              name: 30 days
                                              show:
                                                fill: false
                                              type: custom:mini-graph-card
                                        - type: entities
                                          entities:
                                            - entity: sensor.area_basement_mold
                                            - entity: light.basement_ceiling
                                            - entity: switch.dehumidifier
                                  target: {}
                                name: Basement
                                icon: mdi:home-floor-b

                              - custom: stats2
                                tap_action:
                                  action: call-service
                                  service: browser_mod.popup
                                  service_data:
                                    title: Stats
                                    card:
                                      type: entities
                                      show_header_toggle: true
                                      entities:
                                        - type: section
                                          label: Downstairs
                                        - entity: binary_sensor.area_bedroom_occupied
                                          icon: mdi:bed
                                          type: custom:multiple-entity-row
                                          name: Bedroom
                                          state_header: Occupancy
                                          state_color: true
                                          show_state: false
                                          entities:
                                            - entity: sensor.multisensor_bedroom1_air_temperature
                                              name: Temperature
                                            - entity: sensor.multisensor_bedroom1_illuminance
                                              name: Illuminance
                                        - entity: binary_sensor.unit1_backroom_occupancy
                                          icon: mdi:sofa
                                          type: custom:multiple-entity-row
                                          name: Backroom
                                          state_header: Occupancy
                                          state_color: true
                                          show_state: false
                                          entities:
                                            - entity: sensor.multisensor_kitchen1_air_temperature
                                              name: Temperature
                                            - entity: sensor.multisensor_kitchen1_illuminance
                                              name: Illuminance
                                        - entity: binary_sensor.living_room_occupancy
                                          icon: mdi:desk
                                          type: custom:multiple-entity-row
                                          name: Frontroom
                                          state_color: true
                                          show_state: false
                                          entities:
                                            - entity: sensor.multisensor_frontroom_air_temperature
                                              name: Temperature
                                            - entity: sensor.motion_frontroom_illuminance
                                              name: Illuminance
                                        - entity: binary_sensor.area_bathroom_occupied
                                          icon: mdi:bathtub
                                          type: custom:multiple-entity-row
                                          name: Bathroom
                                          state_header: Occupancy
                                          state_color: true
                                          show_state: false
                                          entities:
                                            - entity: sensor.multisensor_bathroom_air_temperature
                                              name: Temperature
                                            - entity: sensor.motion_bathroom_illuminance
                                              name: Illuminance
                                        - entity: sensor.unit_1_mudroom_temperature
                                          name: Mudroom
                                        - entity: binary_sensor.area_bathroom_occupied
                                          icon: mdi:bathtub
                                          type: custom:mini-graph-card
                                          name: Bathroom
                                          state_header: Occupancy
                                          state_color: true
                                          show_state: false
                                          entities:
                                            - entity: sensor.multisensor_bathroom_air_temperature
                                              name: Temperature
                                            - entity: sensor.motion_bathroom_illuminance
                                              name: Illuminance
                                  title: Upstairs
                                  deviceID:
                                    - this
                                  target: {}
                                name: Stats
                                icon: mdi:chart-bell-curve-cumulative
                        title: Environment
