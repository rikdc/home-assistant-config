title: Home

decluttering_templates: !include_dir_merge_named decluttering_templates/

button_card_templates: !include_dir_merge_named button_card_templates/

# button_card_templates:
#   shoulder_blank_card:
#     card:
#       type: custom:button-card
#       style: |
#         ha-card {
#           overflow: hidden;
#           width: 0px;
#         }
#       color_type: blank-card
#       styles:
#         card:
#           - width: 0px
#   standard:
#     color_type: card
#     size: 80%
#     hold_action:
#       action: more-info
#     styles:
#       card:
#         - padding: 0.2em
#         - "--mdc-ripple-color": yellow
#         - "--mdc-ripple-press-opacity": 0.5
#       icon:
#         - opacity: 0.5
#       name:
#         - font-size: 0.65em
#         - white-space: normal
#       state:
#         - font-size: 0.65em
#         - white-space: normal
#       label:
#         - font-size: 0.4em
#         - white-space: normal
#   wide:
#     template: standard
#     styles:
#       grid:
#         - position: relative
#         - grid-template-areas: '"i n"'
#         - grid-template-columns: 1fr 1fr
#         - grid-template-rows: 1fr
#   option-button:
#     template: standard
#     show_icon: false
#     aspect_ratio: 1/1
#     styles:
#       card:
#         - border-radius: 20%
#   dimmer-option:
#     template: option-button
#     tap_action:
#       action: call-service
#       service: light.turn_on
#       service_data:
#         entity_id: entity
#         brightness: "[[[ return variables.set_value ]]]"
#     state:
#       - operator: default
#         styles:
#           card:
#             - background-color: "[[[ return variables.option_button_off_color ]]]"
#             - color: "[[[ return variables.option_text_off_color ]]]"
#       - operator: template
#         value: >-
#           [[[ return (entity.attributes.brightness||0) >= variables.range_start
#           && (entity.attributes.brightness||0) <= variables.range_stop ]]]
#         styles:
#           card:
#             - background-color: "[[[ return variables.option_button_on_color ]]]"
#             - color: "[[[ return variables.option_text_on_color ]]]"
#   presets:
#     template: standard
#     color_type: icon
#     tap_action:
#       action: none
#     styles:
#       card:
#         - background-color: rgba(0,0,0,0.3)
#       icon:
#         - color: white
#       grid:
#         - grid-template-areas: '"i opt1 opt2 opt3 opt4" "n opt1 opt2 opt3 opt4"'
#         - grid-template-columns: 1fr 1fr 1fr 1fr 1fr
#       custom_fields:
#         opt1:
#           - margin: 0.1em
#           - overflow: visible
#         opt2:
#           - margin: 0.1em
#           - overflow: visible
#         opt3:
#           - margin: 0.1em
#           - overflow: visible
#         opt4:
#           - margin: 0.1em
#           - overflow: visible
#     variables:
#       option_template: dimmer-option
#       option_button_on_color: var(--paper-item-icon-active-color)
#       option_text_on_color: white
#       option_button_off_color: var(--paper-card-background-color)
#       option_text_off_color: white
#       option1_name: Low
#       option1_set_value: 51
#       option1_range_start: 1
#       option1_range_stop: 77
#       option2_name: Med
#       option2_set_value: 102
#       option2_range_start: 78
#       option2_range_stop: 170
#       option3_name: High
#       option3_set_value: 255
#       option3_range_start: 171
#       option3_range_stop: 255
#       option4_name: "Off"
#       option4_set_value: 0
#       option4_range_start: 0
#       option4_range_stop: 0
#     custom_fields:
#       opt1:
#         card:
#           type: custom:button-card
#           entity: "[[[ return variables.entity ]]]"
#           template: "[[[ return variables.option_template ]]]"
#           name: "[[[ return variables.option1_name ]]]"
#           variables:
#             set_value: "[[[ return variables.option1_set_value ]]]"
#             range_start: "[[[ return variables.option1_range_start ]]]"
#             range_stop: "[[[ return variables.option1_range_stop ]]]"
#             option_button_on_color: "[[[ return variables.option_button_on_color ]]]"
#             option_button_off_color: "[[[ return variables.option_button_off_color ]]]"
#             option_text_on_color: "[[[ return variables.option_text_on_color ]]]"
#             option_text_off_color: "[[[ return variables.option_text_off_color ]]]"
#       opt2:
#         card:
#           type: custom:button-card
#           entity: "[[[ return variables.entity ]]]"
#           template: "[[[ return variables.option_template ]]]"
#           name: "[[[ return variables.option2_name ]]]"
#           variables:
#             set_value: "[[[ return variables.option2_set_value ]]]"
#             range_start: "[[[ return variables.option2_range_start ]]]"
#             range_stop: "[[[ return variables.option2_range_stop ]]]"
#             option_button_on_color: "[[[ return variables.option_button_on_color ]]]"
#             option_button_off_color: "[[[ return variables.option_button_off_color ]]]"
#             option_text_on_color: "[[[ return variables.option_text_on_color ]]]"
#             option_text_off_color: "[[[ return variables.option_text_off_color ]]]"
#       opt3:
#         card:
#           type: custom:button-card
#           entity: "[[[ return variables.entity ]]]"
#           template: "[[[ return variables.option_template ]]]"
#           name: "[[[ return variables.option3_name ]]]"
#           variables:
#             set_value: "[[[ return variables.option3_set_value ]]]"
#             range_start: "[[[ return variables.option3_range_start ]]]"
#             range_stop: "[[[ return variables.option3_range_stop ]]]"
#             option_button_on_color: "[[[ return variables.option_button_on_color ]]]"
#             option_button_off_color: "[[[ return variables.option_button_off_color ]]]"
#             option_text_on_color: "[[[ return variables.option_text_on_color ]]]"
#             option_text_off_color: "[[[ return variables.option_text_off_color ]]]"
#       opt4:
#         card:
#           type: custom:button-card
#           entity: "[[[ return variables.entity ]]]"
#           template: "[[[ return variables.option_template ]]]"
#           name: "[[[ return variables.option4_name ]]]"
#           variables:
#             set_value: "[[[ return variables.option4_set_value ]]]"
#             range_start: "[[[ return variables.option4_range_start ]]]"
#             range_stop: "[[[ return variables.option4_range_stop ]]]"
#             option_button_on_color: "[[[ return variables.option_button_on_color ]]]"
#             option_button_off_color: "[[[ return variables.option_button_off_color ]]]"
#             option_text_on_color: "[[[ return variables.option_text_on_color ]]]"
#             option_text_off_color: "[[[ return variables.option_text_off_color ]]]"
views:
  - title: Home
    path: home
    icon: mdi:home
    layout:
      width: 300
      max_cols: 10
    badges: []
    cards:
      - type: custom:swipe-card
        start_card: 2
        reset_after: 30
        parameters:
          spaceBetween: 8
          autoHeight: true
          effect: coverflow
          grabCursor: true
          centeredSlides: true
          slidesPerView: auto
          coverflowEffect:
            rotate: 50
            stretch: 0
            depth: 100
            modifier: 1
            slideShadows: true
        cards:
          - type: custom:stack-in-card
            style: |
              ha-card {
                border-radius: 0;
                margin-top: calc(var(--vertical-margin) * -1);
                margin-left: calc(var(--horizontal-margin) * -3);
                margin-right: calc(var(--horizontal-margin) * -3);
                background: var(--sidebar-background-color);
                color: var(--accent-color);
                padding-top: 1rem;
                --primary-text-color: var(--light-primary-color);
                --secondary-text-color: var(--light-primary-color);
                --ha-card-box-shadow: none;
                --ha-card-background: none;
                --masonry-view-card-margin: 0rem calc(var(--horizontal-margin) * 2);
              }
            cards:
              - type: custom:layout-card
                layout_type: custom:grid-layout
                layout:
                  grid-template-columns: 2fr 1fr
                cards:
                  - type: weather-forecast
                    entity: weather.home
                    style: |
                      ha-card {
                        --primary-text-color: var(--light-primary-color);
                        --secondary-text-color: var(--light-primary-color);
                      }
                    view_layout:
                      grid-column: 1 / -1
          - type: horizontal-stack
            cards:
              - type: markdown
                content: |-
                  <h3>{{states('sensor.dashboard_greeting') }}, {{ user}}</h3>
                    <strong>Temperature:</strong>
                    {{state_attr('weather.home','temperature') | int(0) | round(0)}}&deg;F</br>
                    <strong>Humidity:</strong> {{state_attr('weather.home','humidity') }}%<br />
                    <br /><strong>Air Quality</strong>: {{ states('sensor.aqi') }}
              - type: vertical-stack
                cards:
                  - type: custom:state-switch
                    entity: user
                    default: default
                    states:
                      Richard:
                        type: grid
                        cards:
                          - type: custom:state-switch
                            entity: sun.sun
                            default: default
                            states:
                              default:
                                type: button
                                icon: mdi:bed
                                tap_action:
                                  action: call-service
                                  service: script.person2_worktime
                                  service_data: {}
                                  target: {}
                              below_horizon:
                                type: button
                                icon: mdi:car
                                tap_action:
                                  action: call-service
                                  service: script.person1_bedtime
                                  service_data: {}
                                  target: {}
                          - type: button
                            tap_action:
                              action: call-service
                              service: browser_mod.popup
                              service_data:
                                title: Lights
                                card:
                                  type: custom:decluttering-card
                                  template: popup_lights
                                  variables:
                                    - name: Test Button
                                    - icon: arrow-up
                              title: Upstairs
                              deviceID:
                                - this
                              target: {}
                            name: Lights
                            icon: mdi:lightbulb
                        columns: 2
                      Stefanie:
                        type: grid
                        cards:
                          - type: button
                            tap_action:
                              action: toggle
                            entity: light.unit1_kitchen_ceiling_light
                          - type: button
                            tap_action:
                              action: call-service
                              service: scene.turn_on
                              service_data: {}
                              target:
                                entity_id: scene.downstairs_cooking
                            name: Cooking
                            icon: mdi:chef-hat
                        columns: 2
                      Jenn:
                        type: grid
                        cards:
                          - type: button
                            tap_action:
                              action: call-service
                              service: script.turn_off_upstairs_lights
                              service_data: {}
                              target: {}
                            name: bedtime
                            icon: mdi:sleep
                          - type: button
                            icon: mdi:lightbulb
                            tap_action:
                              action: call-service
                              service: browser_mod.popup
                              service_data:
                                title: Lights
                                card:
                                  type: entities
                                  show_header_toggle: true
                                  entities:
                                    - type: section
                                      label: Downstairs
                                    - type: custom:fold-entity-row
                                      head:
                                        type: custom:multiple-entity-row
                                        name: Frontroom
                                        state_color: true
                                        toggle: true
                                        entity: light.loft_lights
                                        secondary_info:
                                          entity: >-
                                            sensor.multisensor_bedroom1_air_temperature
                                          name: T
                                      entities:
                                        - sensor.monitor_awair_score
                                        - switch.switches_mudroom
                                        - light.outside
                                        - light.unit1_livingroom_lamp
                                        - light.livingroom_worklight_4
                                        - light.frontroom_ceiling
                                        - light.livingroom_lamp
                                    - type: custom:fold-entity-row
                                      head:
                                        type: custom:multiple-entity-row
                                        name: Bedroom
                                        state_color: true
                                        toggle: true
                                        entity: light.unit1_bedroom_lights
                                        secondary_info:
                                          entity: >-
                                            sensor.multisensor_bedroom1_air_temperature
                                          name: T
                                      entities:
                                        - light.bedroom1
                                        - light.person1_nightlight
                                        - light.person2_nightlight
                                        - light.bedroom1_nightlight
                                    - type: custom:fold-entity-row
                                      head:
                                        type: custom:multiple-entity-row
                                        name: Kitchen/Bathroom
                                        state_color: true
                                        toggle: true
                                        entity: light.unit1_kitchen_lights
                                        secondary_info:
                                          entity: >-
                                            sensor.multisensor_bedroom1_air_temperature
                                          name: T
                                      entities:
                                        - light.backroom
                                        - light.bathroom1_vanity
                                        - light.bathroom1_ceiling
                                        - switch.switches_mudroom
                                        - light.unit1_hallway_lights
                                        - light.unit1_kitchen_cabinets
                                        - light.unit1_kitchen_pendants
                                    - type: section
                                      label: Upstairs
                                    - type: custom:fold-entity-row
                                      head:
                                        type: custom:multiple-entity-row
                                        name: Bedroom
                                        state_color: true
                                        toggle: true
                                        entity: light.loft_lights
                                        secondary_info:
                                          entity: >-
                                            sensor.multisensor_bedroom1_air_temperature
                                          name: T
                                      entities:
                                        - light.loft_light
                                        - light.unit2_loft_fairy_lights_2
                                        - light.loft_lamp_1_2
                                        - light.loft_lamp_2_3
                                    - type: custom:fold-entity-row
                                      head:
                                        type: custom:multiple-entity-row
                                        name: Livingroom
                                        state_color: true
                                        toggle: true
                                        entity: light.upstairs_livingroom
                                        secondary_info:
                                          entity: >-
                                            sensor.multisensor_bedroom1_air_temperature
                                          name: T
                                      entities:
                                        - light.upstairs_sofa_lamp
                                        - light.upper_livingroom_lamp
                                    - type: custom:fold-entity-row
                                      head:
                                        type: custom:multiple-entity-row
                                        name: Office
                                        state_color: true
                                        toggle: true
                                        entity: light.office2_lights
                                        secondary_info:
                                          entity: >-
                                            sensor.multisensor_bedroom1_air_temperature
                                          name: T
                                      entities:
                                        - light.office2_lamp2
                                    - type: custom:fold-entity-row
                                      head:
                                        type: custom:multiple-entity-row
                                        name: Kitchen
                                        state_color: true
                                        toggle: true
                                        entity: light.upstairs_kitchen
                                        secondary_info:
                                          entity: >-
                                            sensor.multisensor_bedroom1_air_temperature
                                          name: T
                                      entities:
                                        - light.upstairs_kitchen_pendants
                                        - light.upstairs_kitchen_spotlights
                              title: Upstairs
                              target: {}
                        columns: 2
                      default:
                        type: markdown
                        content: |
                          **Welcome Guest**
                  - type: horizontal-stack
                    cards:
                      - type: custom:button-card
                        tap_action:
                          action: call-service
                          service: automation.trigger
                          service_data:
                            entity_id: automation.cat_has_been_fed
                        entity: binary_sensor.cat_needs_feeding
                        show_icon: true
                        icon: hass:cat
                        show_state: false
                        show_name: false
                        show_label: true
                        label: |
                          [[[
                            var bri = states['inary_sensor.cat_needs_feeding']
                            return (bri ? 'Hungry' : 'Satisfied');
                          ]]]
                        icon_height: 45px
                        hold_action:
                          action: none
                        custom_fields:
                          temp: |
                            [[[
                              return `<div style="padding-top: 36px;"><div style="position: absolute; bottom: 12px; right: 12px;">
                                <span style="width: 12px; height: 12px; color: grey; font-size: 10px">${states['sensor.cat_last_fed'].state} hour(s) ago</span></div></div>`
                            ]]]
                      - type: button
                        tap_action:
                          action: toggle
                        entity: lock.frontdoor
          - type: picture-glance
            aspect_ratio: "16:9"
            camera_image: camera.garden
            camera_view: live
            entities: []
            name: Garden
          - type: picture-glance
            aspect_ratio: "16:9"
            camera_image: camera.downstairs
            camera_view: live
            entities: []
            name: Garden
      - type: custom:swipe-card
        start_card: 1
        reset_after: 30
        parameters:
          spaceBetween: 8
          autoHeight: true
          pagination:
            type: bullets
        cards:
          - type: grid
            columns: 4
            cards:
              - type: button
                tap_action:
                  action: call-service
                  service: script.person1_bedtime
                  service_data: {}
                  target: {}
                icon: mdi:bed
              - type: button
                tap_action:
                  action: toggle
                entity: lock.frontdoor
              - type: button
                tap_action:
                  action: toggle
                entity: lock.frontdoor
              - type: button
                tap_action:
                  action: toggle
                entity: lock.frontdoor
            name: Garden
      - type: horizontal-stack
        cards:
          - type: picture-elements
            image: /local/stefanie.jpg
            entity: person.stefanie
            state_filter:
              home: brightness(110%) saturate(1.2)
              not_home: brightness(75%) grayscale(90%)
            show_name: false
            elements:
              - type: conditional
                conditions:
                  - entity: binary_sensor.workday_sensor
                    state: "on"
                elements:
                  - type: state-icon
                    entity: person.stefanie
                    icon: mdi:office-building-marker-outline
                    style:
                      top: 60%
                      right: "-1%"
                      "--paper-item-icon-color": white
                      transform: scale(0.75)
                  - type: state-label
                    entity: person.stefanie
                    style:
                      top: 53%
                      right: "-1%"
                      weight: 50px
                      color: white
                      font-weight: 300
                      font-size: 10px
              - type: conditional
                conditions:
                  - entity: person.stefanie
                    state: not_home
                elements:
                  - type: state-icon
                    entity: person.stefanie
                    icon: mdi:home-import-outline
                    style:
                      top: 48%
                      right: "-1%"
                      "--paper-item-icon-color": white
                      transform: scale(0.8)
                  - type: state-label
                    entity: person.stefanie
                    style:
                      top: 60%
                      right: 0%
                      weight: 50px
                      color: white
                      font-weight: 300
                      font-size: 10px
              - type: conditional
                conditions:
                  - entity: person.stefanie
                    state: home
                elements:
                  - type: state-icon
                    entity: binary_sensor.hd1905_wifi_state
                    icon: mdi:wifi
                    style:
                      top: 24%
                      right: "-5%"
              - type: state-label
                entity: sensor.hd1905_battery_level
                style:
                  top: 11%
                  right: "-1%"
              - type: state-icon
                entity: sensor.hd1905_battery_level
                style:
                  top: 10%
                  right: "-5%"
              - type: state-label
                entity: input_select.stefanie_location
                style:
                  top: 130px
                  right: "-50px"
                  width: 200px
                  color: white
                  font-size: 12px
                  text-align: right
              - type: conditional
                conditions:
                  - entity: binary_sensor.person1_sleeping
                    state: "on"
                elements:
                  - type: state-icon
                    entity: binary_sensor.person1_sleeping
                    icon: mdi:bed-outline
                    state_color: false
                    style:
                      top: 0%
                      right: 70%
                      transform: scale(0.8)
          - type: picture-elements
            entity: input_select.richard_location
            image: /local/richard.jpg
            state_filter:
              home: brightness(110%) saturate(1.2)
              Away: brightness(75%) grayscale(90%)
            show_name: false
            elements:
              - type: conditional
                conditions:
                  - entity: binary_sensor.workday_sensor
                    state: "on"
                elements:
                  - type: state-icon
                    entity: person.richard
                    icon: mdi:office-building-marker-outline
                    style:
                      top: 60%
                      right: "-1%"
                      "--paper-item-icon-color": white
                      transform: scale(0.75)
                  - type: state-label
                    entity: person.richard
                    style:
                      top: 73%
                      right: "-1%"
                      weight: 50px
                      color: white
                      font-weight: 300
                      font-size: 10px
              - type: conditional
                conditions:
                  - entity: person.richard
                    state: not_home
                elements:
                  - type: state-icon
                    entity: person.richard
                    icon: mdi:home-import-outline
                    style:
                      top: 48%
                      right: "-1%"
                      "--paper-item-icon-color": white
                      transform: scale(0.8)
                  - type: state-label
                    entity: person.richard
                    style:
                      top: 60%
                      right: 0%
                      weight: 50px
                      color: white
                      font-weight: 300
                      font-size: 10px
              - type: conditional
                conditions:
                  - entity: person.richard
                    state: home
                elements:
                  - type: state-icon
                    entity: sensor.iphone_connection_type
                    attribute: wifi_on
                    icon: mdi:wifi
                    style:
                      top: 24%
                      right: "-5%"
              - type: state-label
                entity: sensor.iphone_battery_level
                style:
                  top: 11%
                  right: "-1%"
              - type: state-icon
                entity: sensor.iphone_battery_level
                style:
                  top: 10%
                  right: "-5%"
              - type: state-label
                entity: input_select.richard_location
                style:
                  top: 130px
                  right: "-50px"
                  width: 200px
                  color: white
                  font-size: 12px
                  text-align: right
              - type: conditional
                conditions:
                  - entity: input_boolean.person2_in_bed
                    state: "on"
                elements:
                  - type: state-icon
                    entity: input_boolean.person2_in_bed
                    icon: mdi:bed-outline
                    style:
                      top: 48%
                      right: 70%
                      "--paper-item-icon-color": yellow
                      transform: scale(0.8)
                  - type: state-label
                    entity: input_boolean.person2_in_bed
                    style:
                      top: 60%
                      right: 35%
                      weight: 50px
                      color: yellow
                      font-weight: 300
                      font-size: 10px
          - type: picture-elements
            entity: input_select.jenn_location
            image: /local/jenn.jpg
            state_filter:
              home: brightness(110%) saturate(1.2)
              Away: brightness(75%) grayscale(90%)
            show_name: false
            elements:
              - type: conditional
                conditions:
                  - entity: binary_sensor.workday_sensor
                    state: "on"
                elements:
                  - type: state-icon
                    entity: person.jenn
                    icon: mdi:office-building-marker-outline
                    style:
                      top: 10%
                      right: 0%
                      "--paper-item-icon-color": white
                      transform: scale(0.75)
                  - type: state-label
                    entity: person.jenn
                    style:
                      top: 73%
                      right: "-1%"
                      weight: 50px
                      color: white
                      font-weight: 300
                      font-size: 10px
              - type: conditional
                conditions:
                  - entity: person.jenn
                    state: not_home
                elements:
                  - type: state-icon
                    entity: person.jenn
                    icon: mdi:home-import-outline
                    style:
                      top: 48%
                      right: "-1%"
                      "--paper-item-icon-color": white
                      transform: scale(0.8)
                  - type: state-label
                    entity: input_select.jenn_location
                    style:
                      top: 60%
                      right: 0%
                      weight: 50px
                      color: white
                      font-weight: 300
                      font-size: 10px
              - type: conditional
                conditions:
                  - entity: person.jenn
                    state: home
                elements:
                  - type: state-icon
                    entity: sensor.iphone_connection_type
                    attribute: wifi_on
                    icon: mdi:wifi
                    style:
                      top: 24%
                      right: "-5%"
              - type: state-label
                entity: sensor.jennifer_rabins_iphone_battery_level
                style:
                  top: 11%
                  right: "-1%"
              - type: state-icon
                entity: sensor.jennifer_rabins_iphone_battery_level
                style:
                  top: 10%
                  right: "-5%"
              - type: state-label
                entity: input_select.jenn_location
                style:
                  top: 130px
                  right: "-50px"
                  width: 200px
                  color: white
                  font-size: 12px
                  text-align: right
              - type: conditional
                conditions:
                  - entity: input_boolean.person3_in_bed
                    state: "on"
                elements:
                  - type: state-icon
                    entity: input_boolean.person3_in_bed
                    icon: mdi:bed-outline
                    style:
                      top: 48%
                      right: 70%
                      "--paper-item-icon-color": yellow
                      transform: scale(0.8)
                  - type: state-label
                    entity: input_boolean.person3_in_bed
                    style:
                      top: 60%
                      right: 35%
                      weight: 50px
                      color: yellow
                      font-weight: 300
                      font-size: 10px
      - type: custom:auto-entities
        card:
          type: entities
          title: Presence
        filter:
          include:
            - or:
                - name: /occupancy/
                  domain: binary_sensor
                  state: "on"
                  options:
                    secondary_info: last-changed
                - domain: binary_sensor
                  state: "on"
                  attributes:
                    device_class: motion
                  options:
                    secondary_info: last-changed
        show_empty: false
      - type: horizontal-stack
        cards:
          - type: button
            tap_action:
              action: call-service
              service: browser_mod.popup
              service_data:
                title: Admin
                card:
                  type: custom:decluttering-card
                  template: popup_admin
                  variables:
                    - name: Test Button
                    - icon: arrow-up
              target: {}
            name: Admin
            icon: mdi:account-supervisor-circle-outline
            entity: light.unit1_livingroom_lamp
          - type: button
            tap_action:
              action: call-service
              service: browser_mod.popup
              service_data:
                title: Basement
                card:
                  type: vertical-stack
                  cards:
                    - type: entities
                      entities:
                        - entity: >-
                            binary_sensor.basement_door_access_control_window_door_is_open
                          icon: mdi:bed
                          type: custom:multiple-entity-row
                          name: Basement
                          state_header: Occupancy
                          state_color: true
                          show_state: false
                          entities:
                            - entity: sensor.basement_temperature
                              name: Temperature
                            - entity: sensor.multisensor_bedroom1_illuminance
                              name: Illuminance
                    - type: horizontal-stack
                      cards:
                        - align_icon: left
                          align_state: center
                          entities:
                            - sensor.main_pump_running
                          font_size: 75
                          name: Today
                          show:
                            fill: false
                          type: custom:mini-graph-card
                        - align_icon: left
                          align_state: center
                          entities:
                            - sensor.main_pump_3day_cycles
                          font_size: 75
                          name: 3 days
                          show:
                            fill: false
                          type: custom:mini-graph-card
                        - align_icon: left
                          align_state: center
                          entities:
                            - sensor.main_pump_30day_cycles
                          font_size: 75
                          name: 30 days
                          show:
                            fill: false
                          type: custom:mini-graph-card
                    - type: entities
                      entities:
                        - entity: sensor.area_basement_mold
                        - entity: light.basement_ceiling
                        - entity: switch.dehumidifier
              target: {}
            name: Basement
            icon: mdi:home-floor-b
          - type: button
            tap_action:
              action: call-service
              service: browser_mod.navigate
              service_data:
                navigation_path: /lovelace/7
              target: {}
            entity: light.unit1_kitchen_ceiling_light
            name: Cameras
            icon: mdi:cctv
          - type: button
            tap_action:
              action: call-service
              service: browser_mod.popup
              service_data:
                title: Stats
                card:
                  type: entities
                  show_header_toggle: true
                  entities:
                    - type: section
                      label: Downstairs
                    - entity: binary_sensor.area_bedroom_occupied
                      icon: mdi:bed
                      type: custom:multiple-entity-row
                      name: Bedroom
                      state_header: Occupancy
                      state_color: true
                      show_state: false
                      entities:
                        - entity: sensor.multisensor_bedroom1_air_temperature
                          name: Temperature
                        - entity: sensor.multisensor_bedroom1_illuminance
                          name: Illuminance
                    - entity: binary_sensor.unit1_backroom_occupancy
                      icon: mdi:sofa
                      type: custom:multiple-entity-row
                      name: Backroom
                      state_header: Occupancy
                      state_color: true
                      show_state: false
                      entities:
                        - entity: sensor.multisensor_kitchen1_air_temperature
                          name: Temperature
                        - entity: sensor.multisensor_kitchen1_illuminance
                          name: Illuminance
                    - entity: binary_sensor.living_room_occupancy
                      icon: mdi:desk
                      type: custom:multiple-entity-row
                      name: Frontroom
                      state_color: true
                      show_state: false
                      entities:
                        - entity: sensor.motion_frontroom_air_temperature
                          name: Temperature
                        - entity: sensor.motion_frontroom_illuminance
                          name: Illuminance
                    - entity: binary_sensor.area_bathroom_occupied
                      icon: mdi:bathtub
                      type: custom:multiple-entity-row
                      name: Bathroom
                      state_header: Occupancy
                      state_color: true
                      show_state: false
                      entities:
                        - entity: sensor.motion_bathroom_air_temperature
                          name: Temperature
                        - entity: sensor.motion_bathroom_illuminance
                          name: Illuminance
                    - entity: sensor.unit_1_mudroom_temperature
                      name: Mudroom
                    - entity: binary_sensor.area_bathroom_occupied
                      icon: mdi:bathtub
                      type: custom:mini-graph-card
                      name: Bathroom
                      state_header: Occupancy
                      state_color: true
                      show_state: false
                      entities:
                        - entity: sensor.motion_bathroom_air_temperature
                          name: Temperature
                        - entity: sensor.motion_bathroom_illuminance
                          name: Illuminance
              title: Upstairs
              deviceID:
                - this
              target: {}
            name: Stats
            icon: mdi:chart-bell-curve-cumulative
      - type: custom:auto-entities
        card:
          type: entities
          title: Battery warning
        filter:
          include:
            - domain: binary_sensor
              options:
                secondary_info: last-changed
              state: "on"
              attributes:
                device_class: battery
  - icon: mdi:air-filter
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - type: markdown
            content: "### Frontroom"
          - type: horizontal-stack
            cards:
              - type: custom:mini-graph-card
                animate: true
                color_thresholds:
                  - color: "#a55eea"
                    value: 19.58
                  - color: "#8854d0"
                    value: 24.98
                  - color: "#3867d6"
                    value: 29.84
                  - color: "#4b7bec"
                    value: 34.88
                  - color: "#2d98da"
                    value: 39.74
                  - color: "#45aaf2"
                    value: 44.78
                  - color: "#0fb9b1"
                    value: 49.82
                  - color: "#2bcbba"
                    value: 54.86
                  - color: "#20bf6b"
                    value: 59.9
                  - color: "#26de81"
                    value: 64.76
                  - color: "#fed330"
                    value: 69.8
                  - color: "#f7b731"
                    value: 74.84
                  - color: "#fd9644"
                    value: 79.88
                  - color: "#fa8231"
                    value: 84.74
                  - color: "#fc5c65"
                    value: null
                  - color: "#eb3b5a"
                    value: 96.62
                entities:
                  - entity: sensor.motion_frontroom_air_temperature
                    index: 0
                    name: Temperature
                    show_state: true
                    state_adaptive_color: true
                  - color: "#666666"
                    entity: sensor.solar_elevation
                    line_width: 1
                    show_fill: false
                    show_legend: false
                    show_state: false
                    y_axis: secondary
                hour24: true
                hours_to_show: 24
                line_width: 2
                lower_bound_secondary: 0
                name: Temperature
                points_per_hour: 12
                show:
                  extrema: true
                  graph: line
                  points: false
              - type: custom:mini-graph-card
                animate: true
                entities:
                  - entity: sensor.motion_frontroom_humidity
                    index: 0
                    name: Humditiy
                    show_state: true
                    state_adaptive_color: true
                show:
                  extrema: true
                  graph: line
                  points: false
          - type: markdown
            content: "### Basement"
          - type: horizontal-stack
            cards:
              - type: custom:mini-graph-card
                animate: true
                color_thresholds:
                  - color: "#a55eea"
                    value: 19.58
                  - color: "#8854d0"
                    value: 24.98
                  - color: "#3867d6"
                    value: 29.84
                  - color: "#4b7bec"
                    value: 34.88
                  - color: "#2d98da"
                    value: 39.74
                  - color: "#45aaf2"
                    value: 44.78
                  - color: "#0fb9b1"
                    value: 49.82
                  - color: "#2bcbba"
                    value: 54.86
                  - color: "#20bf6b"
                    value: 59.9
                  - color: "#26de81"
                    value: 64.76
                  - color: "#fed330"
                    value: 69.8
                  - color: "#f7b731"
                    value: 74.84
                  - color: "#fd9644"
                    value: 79.88
                  - color: "#fa8231"
                    value: 84.74
                  - color: "#fc5c65"
                    value: null
                  - color: "#eb3b5a"
                    value: 96.62
                entities:
                  - entity: sensor.basement_temperature
                    index: 0
                    name: Temperature
                    show_state: true
                    state_adaptive_color: true
                  - color: "#666666"
                    entity: sensor.solar_elevation
                    line_width: 1
                    show_fill: false
                    show_legend: false
                    show_state: false
                    y_axis: secondary
                hour24: true
                hours_to_show: 24
                line_width: 2
                lower_bound_secondary: 0
                name: Temperature
                points_per_hour: 12
                show:
                  extrema: true
                  graph: line
                  points: false
              - type: custom:mini-graph-card
                animate: true
                entities:
                  - entity: sensor.basement_humidity
                    index: 0
                    name: Humditiy
                    show_state: true
                    state_adaptive_color: true
                show:
                  extrema: true
                  graph: line
                  points: false
          - type: markdown
            content: "#### Bedroom1"
          - type: horizontal-stack
            cards:
              - type: custom:mini-graph-card
                animate: true
                color_thresholds:
                  - color: "#a55eea"
                    value: 19.58
                  - color: "#8854d0"
                    value: 24.98
                  - color: "#3867d6"
                    value: 29.84
                  - color: "#4b7bec"
                    value: 34.88
                  - color: "#2d98da"
                    value: 39.74
                  - color: "#45aaf2"
                    value: 44.78
                  - color: "#0fb9b1"
                    value: 49.82
                  - color: "#2bcbba"
                    value: 54.86
                  - color: "#20bf6b"
                    value: 59.9
                  - color: "#26de81"
                    value: 64.76
                  - color: "#fed330"
                    value: 69.8
                  - color: "#f7b731"
                    value: 74.84
                  - color: "#fd9644"
                    value: 79.88
                  - color: "#fa8231"
                    value: 84.74
                  - color: "#fc5c65"
                    value: null
                  - color: "#eb3b5a"
                    value: 96.62
                entities:
                  - entity: sensor.multisensor_bedroom1_air_temperature
                    index: 0
                    name: Temperature
                    show_state: true
                    state_adaptive_color: true
                  - color: "#666666"
                    entity: sensor.solar_elevation
                    line_width: 1
                    show_fill: false
                    show_legend: false
                    show_state: false
                    y_axis: secondary
                hour24: true
                hours_to_show: 24
                line_width: 2
                lower_bound_secondary: 0
                name: Temperature
                points_per_hour: 12
                show:
                  extrema: true
                  graph: line
                  points: false
              - type: custom:mini-graph-card
                animate: true
                entities:
                  - entity: sensor.multisensor_bedroom1_humidity
                    index: 0
                    name: Humditiy
                    show_state: true
                    state_adaptive_color: true
                show:
                  extrema: true
                  graph: line
                  points: false
          - type: markdown
            content: "#### Bedroom2"
          - type: horizontal-stack
            cards:
              - type: custom:mini-graph-card
                animate: true
                color_thresholds:
                  - color: "#a55eea"
                    value: 19.58
                  - color: "#8854d0"
                    value: 24.98
                  - color: "#3867d6"
                    value: 29.84
                  - color: "#4b7bec"
                    value: 34.88
                  - color: "#2d98da"
                    value: 39.74
                  - color: "#45aaf2"
                    value: 44.78
                  - color: "#0fb9b1"
                    value: 49.82
                  - color: "#2bcbba"
                    value: 54.86
                  - color: "#20bf6b"
                    value: 59.9
                  - color: "#26de81"
                    value: 64.76
                  - color: "#fed330"
                    value: 69.8
                  - color: "#f7b731"
                    value: 74.84
                  - color: "#fd9644"
                    value: 79.88
                  - color: "#fa8231"
                    value: 84.74
                  - color: "#fc5c65"
                    value: null
                  - color: "#eb3b5a"
                    value: 96.62
                entities:
                  - entity: sensor.upper_office_multisensor_temperature
                    index: 0
                    name: Temperature
                    show_state: true
                    state_adaptive_color: true
                  - color: "#666666"
                    entity: sensor.solar_elevation
                    line_width: 1
                    show_fill: false
                    show_legend: false
                    show_state: false
                    y_axis: secondary
                hour24: true
                hours_to_show: 24
                line_width: 2
                lower_bound_secondary: 0
                name: Temperature
                points_per_hour: 12
                show:
                  extrema: true
                  graph: line
                  points: false
              - type: custom:mini-graph-card
                animate: true
                entities:
                  - entity: sensor.upper_office_multisensor_humidity
                    index: 0
                    name: Humditiy
                    show_state: true
                    state_adaptive_color: true
                show:
                  extrema: true
                  graph: line
                  points: false
          - type: markdown
            content: "#### Garage"
          - type: horizontal-stack
            cards:
              - type: custom:mini-graph-card
                animate: true
                color_thresholds:
                  - color: "#a55eea"
                    value: 19.58
                  - color: "#8854d0"
                    value: 24.98
                  - color: "#3867d6"
                    value: 29.84
                  - color: "#4b7bec"
                    value: 34.88
                  - color: "#2d98da"
                    value: 39.74
                  - color: "#45aaf2"
                    value: 44.78
                  - color: "#0fb9b1"
                    value: 49.82
                  - color: "#2bcbba"
                    value: 54.86
                  - color: "#20bf6b"
                    value: 59.9
                  - color: "#26de81"
                    value: 64.76
                  - color: "#fed330"
                    value: 69.8
                  - color: "#f7b731"
                    value: 74.84
                  - color: "#fd9644"
                    value: 79.88
                  - color: "#fa8231"
                    value: 84.74
                  - color: "#fc5c65"
                    value: null
                  - color: "#eb3b5a"
                    value: 96.62
                entities:
                  - entity: sensor.multisensor_garage_air_temperature
                    index: 0
                    name: Temperature
                    show_state: true
                    state_adaptive_color: true
                  - color: "#666666"
                    entity: sensor.solar_elevation
                    line_width: 1
                    show_fill: false
                    show_legend: false
                    show_state: false
                    y_axis: secondary
                hour24: true
                hours_to_show: 24
                line_width: 2
                lower_bound_secondary: 0
                name: Temperature
                points_per_hour: 12
                show:
                  extrema: true
                  graph: line
                  points: false
              - type: custom:mini-graph-card
                animate: true
                color_thresholds:
                  - color: "#a55eea"
                    value: -6.9
                  - color: "#8854d0"
                    value: -3.9
                  - color: "#3867d6"
                    value: -1.2
                  - color: "#4b7bec"
                    value: 1.6
                  - color: "#2d98da"
                    value: 4.3
                  - color: "#45aaf2"
                    value: 7.1
                  - color: "#0fb9b1"
                    value: 9.9
                  - color: "#2bcbba"
                    value: 12.7
                  - color: "#20bf6b"
                    value: 15.5
                  - color: "#26de81"
                    value: 18.2
                  - color: "#fed330"
                    value: 21
                  - color: "#f7b731"
                    value: 23.8
                  - color: "#fd9644"
                    value: 26.6
                  - color: "#fa8231"
                    value: 29.3
                  - color: "#fc5c65"
                    value: 32.1
                  - color: "#eb3b5a"
                    value: 35.9
                entities:
                  - entity: sensor.multisensor_garage_humidity
                    index: 0
                    name: Temperature
                    show_state: true
                    state_adaptive_color: true
                  - color: "#666666"
                    entity: sensor.solar_elevation
                    line_width: 1
                    show_fill: false
                    show_legend: false
                    show_state: false
                    y_axis: secondary
                hour24: true
                hours_to_show: 24
                line_width: 2
                lower_bound_secondary: 0
                name: Temperature
                points_per_hour: 12
                show:
                  extrema: true
                  graph: line
                  points: false
  - badges: []
    cards:
      - type: entities
        title: Automation Settings
        show_header_toggle: false
        entities:
          - entity: input_boolean.allow_notifications
          - entity: input_boolean.homeautomation
          - entity: input_boolean.guests
          - type: custom:fold-entity-row
            open: false
            head:
              type: section
              label: Downstairs Lights & Switches
            entities:
              - entity: automation.turn_on_unit2_livingroom_lamps_if_theres_motion
                secondary_info: last-triggered
              - input_number.unit1_bedroom_lights_off_duration
              - input_datetime.unit1_bedroom_lights_on_start
              - input_datetime.unit1_bedroom_lights_on_stop
          - type: custom:fold-entity-row
            open: false
            head:
              type: section
              label: Upstairs Lights & Switches
            entities:
              - entity: automation.turn_on_unit2_livingroom_lamps_if_theres_motion
                secondary_info: last-triggered
              - input_number.unit2_livingroom_lights_off_duration
              - input_datetime.unit2_livingroom_lights_on_start
              - input_datetime.unit2_livingroom_lights_on_stop
      - type: entities
        title: Bayesian
        entities:
          - type: custom:fold-entity-row
            open: false
            head:
              type: section
              label: Area - Bathroom Occupied
            entities:
              - sensor.stats_bathroom_bright
              - sensor.stats_bathroom_humidity_trend
              - sensor.stats_bathroom_motion
              - sensor.stats_bathroom_occupied
              - sensor.stats_bathroom_temperature_trend
          - type: custom:fold-entity-row
            open: false
            head:
              type: section
              label: Person1 - Sleeping
            entities:
              - binary_sensor.person1_sleeping
              - sensor.stats_bathroom_humidity_trend
              - sensor.stats_bathroom_motion
              - sensor.stats_bathroom_occupied
              - sensor.stats_bathroom_temperature_trend
      - type: entities
        entities:
          - entity: input_boolean.bedtime
          - entity: light.unit1_kitchen_pendants
          - entity: light.unit1_kitchen_cabinets
    icon: mdi:tune
    path: troubleshoot
    title: Troubleshoot
    visible:
      - user: 5b50a74c8dff44f8a1f11e277fd19ff8
  - icon: hass:flower
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - type: entities
            entities:
              - entity: group.growlights1
              - entity: input_select.growtent1_growschedule
              - entity: input_datetime.growtent1_lights_on
              - entity: input_datetime.growtent1_lights_off
          - type: custom:mini-graph-card
            entities:
              - sensor.growbot1_illuminance
            align_icon: left
            align_state: center
            show:
              fill: false
          - type: custom:mini-graph-card
            entities:
              - sensor.air_temperature
              - sensor.humidity
              - sensor.soil_temperature
            align_icon: left
            align_state: center
            show:
              fill: false
      - type: vertical-stack
        cards:
          - type: entities
            entities:
              - entity: group.growlights2
              - entity: input_select.growtent2_growschedule
              - entity: input_datetime.growtent2_lights_on
              - entity: input_datetime.growtent2_lights_off
          - type: custom:mini-graph-card
            entities:
              - sensor.growbot1_illuminance
            align_icon: left
            align_state: center
            show:
              fill: false
          - type: custom:mini-graph-card
            entities:
              - sensor.air_temperature
              - sensor.humidity
              - sensor.soil_temperature
            align_icon: left
            align_state: center
            show:
              fill: false

  - icon: mdi:music
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - type: horizontal-stack
            cards:
              - type: custom:gap-card
              - type: custom:button-card
                size: 25px
                icon: |
                  [[[ 
                    if (states['media_player.multi_room_controller'].state == "playing")
                        return "mdi:cast-connected";
                    else if (states['media_player.multi_room_controller'].state == "playing")
                      return "mdi:cast-connected";
                    else if (states['media_player.multi_room_controller'].state == "playing")
                      return "mdi:cast-connected";
                    else if (states['media_player.multi_room_controller'].state == "playing")
                        return "mdi:cast-connected";
                    else if (states['media_player.multi_room_controller'].state == "playing")
                        return "mdi:cast-connected";
                    else if (states['media_player.multi_room_controller'].state == "playing")
                        return "mdi:cast-connected";
                    else
                        return "mdi:cast";
                  ]]]
                styles:
                  card:
                    - width: 40px
                    - height: 40px
                    - background-color: rgba(255,255,255,0)
                    - box-shadow: none
                  icon:
                    - margin-left: px
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    command: popup
                    title: Select where to cast
                    card:
                      type: vertical-stack
                      cards:
                        - type: custom:mini-media-player
                          group: true
                          min_volume: 5
                          max_volume: 75
                          entity: media_player.office_speaker
                          name: Office
                          tap_action:
                            action: call-service
                            service: input_boolean.toggle
                            service_data:
                              entity_id: input_boolean.office_mp
                          hide:
                            controls: true
                            icon: false
                            info: true
                            power: true
                            progress: true
                            state_label: false
                            volume_level: false
                        - type: custom:mini-media-player
                          name: Kitchen
                          group: true
                          min_volume: 5
                          max_volume: 75
                          tap_action:
                            action: call-service
                            service: input_boolean.toggle
                            service_data:
                              entity_id: input_boolean.kitchen_mp
                          hide:
                            controls: true
                            icon: false
                            info: true
                            power: true
                            progress: true
                            state_label: false
                            volume_level: false
                          entity: media_player.kitchen_speaker
                        - type: custom:mini-media-player
                          group: true
                          min_volume: 5
                          max_volume: 75
                          name: Family Room
                          tap_action:
                            action: call-service
                            service: input_boolean.toggle
                            service_data:
                              entity_id: input_boolean.familyroom_mp
                          hide:
                            controls: true
                            icon: false
                            info: true
                            power: true
                            progress: true
                            state_label: false
                            volume_level: false
                          entity: media_player.family_room_speaker_cast
                        - type: custom:mini-media-player
                          entity: media_player.front_living_room
                          group: true
                          min_volume: 5
                          max_volume: 75
                          name: Front Room
                          tap_action:
                            action: call-service
                            service: input_boolean.toggle
                            service_data:
                              entity_id: input_boolean.frontroom_mp
                          hide:
                            controls: true
                            icon: false
                            info: true
                            power: true
                            progress: true
                            state_label: false
                            volume_level: false
                        - type: custom:mini-media-player
                          name: Living Rooms
                          group: true
                          min_volume: 5
                          max_volume: 75
                          tap_action:
                            action: call-service
                            service: input_boolean.toggle
                            service_data:
                              entity_id: input_boolean.livingrooms_gp
                          hide:
                            controls: true
                            icon: false
                            info: true
                            power: true
                            progress: true
                            state_label: false
                            volume_level: false
                          entity: media_player.living_rooms
                        - type: custom:mini-media-player
                          entity: media_player.entry
                          group: true
                          min_volume: 5
                          max_volume: 75
                          name: Entry
                          tap_action:
                            action: call-service
                            service: input_boolean.toggle
                            service_data:
                              entity_id: input_boolean.entry_gp
                          hide:
                            controls: true
                            icon: false
                            info: true
                            power: true
                            progress: true
                            state_label: false
                            volume_level: false
                    deviceID:
                      - this
                      - dashboard
                    style:
                      $: >
                        .mdc-dialog .mdc-dialog__container .mdc-dialog__surface
                        {
                          border-radius: 0px;
                        }
                      .: |
                        :host {
                          --mdc-theme-surface: rgba(0,0,0,0.8);
                          --secondary-background-color: rgba(69,90,100,1);
                          --ha-card-background: rgba(0,0,0,0.5);
                        }
                        :host .content {
                          width: 90vw;
                          height: 95vh;
                         }
          - type: picture-glance
            entities: []
            camera_image: camera.album_art
            tap_action:
              action: none
            hold_action:
              action: none
            card_mod:
              style: |
                ha-card {
                  width: 98%;
                  margin: auto;
                  border-radius: 0;
                  position: relative;
                }
                .box {
                  background: rgba(255,255,255,0) !important;
                }
          - type: custom:mod-card
            card_mod:
              style: |
                ha-card {
                  background: rgba(255, 255, 255, 0.0);
                  border-radius: 0;
                  box-shadow: none;
                  position: relative;
                  top: -10px;
                 }
            card:
              type: custom:html-template-card
              ignore_line_breaks: true
              content: |
                <style>
                  .title {
                    display: block;
                    font-weight: 500;
                    font-size: 1.2em;
                    text-align: center;
                    white-space: nowrap;
                    overflow: hidden;
                    text-overflow: ellipsis; !important;
                  }
                  .artist {
                    display: block;
                    text-align: center;     
                  }
                </style>
                <div style="">
                {% if state_attr("media_player.multi_room_controller", "media_playlist") -%}
                  <h3>{{ state_attr('media_player.multi_room_controller', 'media_playlist') }}</h3>
                  <span class="title">{{ state_attr('multi_room_controller', 'media_title') }}</br></span>
                  {% if state_attr("media_player.multi_room_controller", "media_artist") -%}
                    <span class="artist">{{ state_attr('media_player.multi_room_controller', 'media_artist') }}</span>
                  {%- else -%}
                    <center>&nbsp;</center>
                  {%- endif %}
                {%- else -%}
                  <h3>&nbsp;</h3>
                  <span class="title">&nbsp;</br></span>
                  <span class="artist">&nbsp;</span>    
                {%- endif %}
                </div>
          - type: custom:mini-media-player
            entity: media_player.multi_room_controller
            toggle_power: true
            artwork: none
            source: full
            name: Music Stream
            group: true
            scale: "1.25"
            info: scroll
            hide:
              info: true
              icon: true
              name: true
              runtime: true
              volume: true
              power: false
              controls: true
              progress: true
            style: |
              ha-card {
                float:right;
                position: relative;
                top: -140px;
              }
          - type: custom:mini-media-player
            entity: media_player.multi_room_controller
            toggle_power: true
            artwork: none
            source: full
            name: Music Stream
            info: scroll
            group: true
            scale: "1.25"
            hide:
              info: true
              icon: true
              name: true
              runtime: false
              volume: true
              power: true
              source: true
              controls: true
            card_mod:
              style: |
                ha-card {
                  width: 93%;
                  margin: auto;
                  position: relative;
                  top: -100px;
                }
          - type: custom:mini-media-player
            entity: media_player.multi_room_controller
            toggle_power: true
            artwork: none
            source: full
            name: Music Stream
            info: scroll
            group: true
            scale: "1.25"
            hide:
              info: true
              icon: true
              name: true
              volume: true
              power: true
              source: true
              progress: true
              play_pause: true
              play_stop: false
            card_mod:
              style: |
                ha-card {
                  margin-left: auto;
                  position: relative;
                  top: -100px;
                }
  - title: Construction
    path: construction
    icon: mdi:account-hard-hat
    badges: []
    cards:
      - type: custom:stack-in-card
        view_layout:
          grid-area: header
        style: |
          ha-card {
            border-radius: 0;
            margin-top: calc(var(--vertical-margin) * -1);
            margin-left: calc(var(--horizontal-margin) * -3);
            margin-right: calc(var(--horizontal-margin) * -3);
            background: var(--sidebar-background-color);
            color: var(--accent-color);
            padding-top: 1rem;
            --primary-text-color: var(--light-primary-color);
            --secondary-text-color: var(--light-primary-color);
            --ha-card-box-shadow: none;
            --ha-card-background: none;
            --masonry-view-card-margin: 0rem calc(var(--horizontal-margin) * 2);
          }
        cards:
          - type: custom:layout-card
            layout_type: custom:grid-layout
            layout:
              grid-template-columns: 2fr 1fr
            cards:
              - type: markdown
                style: |
                  ha-card {
                    --primary-text-color: var(--light-primary-color);
                    box-shadow: none;
                    background: none;
                  }
                  ha-markdown.no-header {
                    padding-bottom: 0;
                  }
                content: |
                  # Overview - {{ states('sensor.home_mode') | title }}
              - type: markdown
                content: |
                  ## {{ states('sensor.average_temperature') }}
                  ### {{ as_timestamp(now()) | timestamp_custom("%I:%M%p") }}
                view_layout:
                  justify-content: center
                  align-items: center
                style: |
                  ha-card {
                    --primary-text-color: var(--light-primary-color);
                    float: right;
                    box-shadow: none;
                    background: none;
                  }
              - type: weather-forecast
                entity: weather.home
                style: |
                  ha-card {
                    --primary-text-color: var(--light-primary-color);
                    --secondary-text-color: var(--light-primary-color);
                  }
                view_layout:
                  grid-column: 1 / -1
  - icon: mdi:docker
    title: Docker
    path: docker
    badges: []
    cards:
      - type: custom:auto-entities
        card:
          type: grid
        card_param: cards
        filter:
          include:
            - entity_id: sensor.mufasa_docker_*_state
              options:
                custom_fields:
                  cpu: |
                    [[[
                      return `<ha-icon
                        icon="mdi:chip"
                        style="width: 20px; height: 20px; color: #B58E31;">
                        </ha-icon><span> CPU: <span style=color: var(--text-color-sensor);>${states[entity.entity_id.replace('state', 'cpu')].state}%</span></span>`
                    ]]]
                  state: |
                    [[[
                      return `<ha-icon
                        icon="mdi:power"
                        style="width: 20px; height: 20px; color: #B58E31;">
                        </ha-icon><span> State: <span style=color: var(--text-color-sensor);>${states[entity.entity_id].state}</span></span>`
                    ]]]
                  mem: |
                    [[[
                      return `<ha-icon
                        icon="mdi:chip"
                        style="width: 20px; height: 20px; color: #B58E31;">
                        </ha-icon><span> RAM: <span style=color: var(--text-color-sensor);>${states[entity.entity_id.replace('state', 'memory')].state} MB</span></span>`
                    ]]]
                  up: |
                    [[[
                      return `<ha-icon
                        icon="mdi:power"
                        style="width: 20px; height: 20px; color: #B58E31;">
                        </ha-icon><span> <span style=color: var(--text-color-sensor);>${states[entity.entity_id.replace('state', 'status')].state}</span></span>`
                    ]]]
                show_entity_picture: true
                show_state: false
                size: 35px
                state:
                  - entity_picture: /local/docker.png
                    styles:
                      entity_picture:
                        - filter: grayscale(90%)
                    operator: default
                  - entity_picture: /local/docker.png
                    value: running
                styles:
                  custom_fields:
                    cpu:
                      - padding-bottom: 0px
                      - align-self: start
                      - padding-left: 2px
                      - font-size: 12px
                      - justify-self: start
                    up:
                      - padding-bottom: 0px
                      - align-self: start
                      - padding-left: 2px
                      - font-size: 12px
                      - justify-self: start
                    mem:
                      - padding-bottom: 0px
                      - align-self: start
                      - padding-left: 2px
                      - font-size: 12px
                      - justify-self: start
                    state:
                      - padding-bottom: 0px
                      - align-self: start
                      - padding-left: 2px
                      - font-size: 12px
                      - justify-self: start
                  grid:
                    - grid-template-areas: '"i i" "n n" "state state" "up up" "cpu cpu" "mem mem"'
                    - grid-template-columns: 1fr 1fr
                    - grid-template-rows: 1fr min-content min-content min-content min-content
                  name:
                    - font-weight: bold
                    - font-size: 16px
                    - color: rgb(18,154,190)
                    - align-self: middle
                    - justify-self: middle
                    - padding-bottom: 4px
                  card:
                    - height: 165px
                tap_action:
                  action: call-service
                  service: switch.toggle
                  service_data:
                    entity_id: switch.docker_homeassistant
                type: custom:button-card
  - !include views/view_home.yaml
  - !include views/view_battery.yaml
  - !include views/view_camera.yaml
  - !include views/view_server.yaml
  - !include views/view_remotes.yaml
  - !include views/view_environment.yaml
  - !include views/view_sensors.yaml
  - !include views/view_media.yaml
