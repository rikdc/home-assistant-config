#################################################################
#                                                               #
#                            Unifi                              #
#                                                               #
#################################################################
automation:
  - alias: "Network: New device connected"
    trigger:
      - platform: event
        event_type: device_tracker_new_device
    action:
      - service: notify.admins
        data:
          title: "Network Monitor"
          message: "There has been a new device detected on the network."

sensor:
  - platform: template
    sensors:
      internet_mb_downloaded:
        friendly_name: "Internet Download"
        unit_of_measurement: "MB"
        value_template: "{{ state_attr('binary_sensor.edgeos_interface_eth0', 'MBytes (Received)') }}"
      internet_mb_uploaded:
        value_template: "{{ state_attr('binary_sensor.edgeos_interface_eth0', 'MBytes (Sent)') }}"
        unit_of_measurement: "MB"
