#
# Notifications Routines
#
script:
  # Thank you
  # https://github.com/dannytsang/homeassistant-config/blob/d71052fc7bc723ee5441c1f4af4fd2c8cfefe9b4/packages/notifications.yaml
  post_to_home_log:
    alias: Post To Home Log
    icon: mdi:slack
    description: "Post a text message to the home_log channel."
    max: 10
    mode: queued
    # https://github.com/home-assistant/frontend/issues/8591
    fields:
      message:
        description: Message to post.
        required: true
      title:
        description: (optional)Header to the message posted.
    sequence:
      service: notify.all
      data:
        title: "{{ title|default('', true) }}"
        message: "{{ message }}"
      # - condition: state
      #   entity_id: input_boolean.enable_slack_notifications
      #   state: "on"
      # - data:
      #     message: "{{ message }}"
      #     title: "{{ title|default('', true) }}"
      #     target: "#home_log"
      #     data:
      #       blocks: []
      #   service: notify.slack_notify

notify:
  - name: STANDARD_EMAIL
    username: !secret email_username
    password: !secret email_password
    platform: smtp
    sender: !secret sender_email
    recipient: !secret my_email
    server: !secret email_host
    port: 465
    encryption: tls

  - name: ALL
    platform: group
    services:
      - service: !secret person1_mobile
      - service: !secret person2_mobile
      - service: !secret person3_mobile

  - name: android
    platform: group
    services:
      - service: !secret person1_mobile

  - name: iphone
    platform: group
    services:
      - service: !secret person2_mobile
      - service: !secret person3_mobile

  - name: home_automation
    platform: group
    services:
      - service: !secret person2_mobile
        data:
          title: "Enable Home automation?"
          data:
            push:
              badge: 0
              category: "home_automation"

  - name: admins
    platform: group
    services:
      - service: !secret person2_mobile
