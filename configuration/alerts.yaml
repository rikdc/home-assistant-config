alert:
  home_automation:
    name: Home automation is disabled
    done_message: Home automation enabled
    entity_id: input_boolean.allow_automation_execution
    state: "off"
    repeat: 30
    can_acknowledge: True
    #skip_first: True
    notifiers:
      - home_automation

  bedroom1_humidity:
    name: Bedroom1 Humidity Status
    done_message: Bedroom1 humidity is back to normal
    message: >
      Humditiy in Bedroom1 is {{ state_attr('binary_sensor.bedroom1_humidity_status', 'reason') }}
    entity_id: binary_sensor.bedroom1_humidity_status
    repeat:
      - 60
    notifiers:
      - admins

  bedroom2_humidity:
    name: Bedroom2 Humidity warning
    message: >
      Humditiy in Bedroom2 is {{ state_attr('binary_sensor.bedroom2_humidity_status', 'reason') }}
    done_message: Bedroom2 humidity is back to normal
    entity_id: binary_sensor.bedroom2_humidity_status
    repeat:
      - 60
    notifiers:
      - admins

  livingroom1_humidity:
    name: Livingroom Humidity Status
    done_message: Livingroom humidity is back to normal
    entity_id: binary_sensor.livingroom1_humidity_status
    message: >
      Humditiy in Bedroom2 is {{ state_attr('binary_sensor.livingroom1_humidity_status', 'reason') }}
    repeat:
      - 60
    notifiers:
      - admins

  basement_mold_warning:
    name: "Basement mould risk is high"
    done_message: Basement mold risk is normal
    entity_id: binary_sensor.basement_mold_status
    repeat:
      - 15
      - 30
      - 60
    notifiers:
      - admins

  basement_sumppump_not_running:
    name: Basement sump has not been running for a few days!
    entity_id: binary_sensor.sump_pump_problem
    repeat:
      - 15
      - 30
      - 60
    notifiers:
      - admins

  alarm_sensors_unavailable:
    name: Alarm Sensors are offline!
    entity_id: sensor.alarm_sensors_unavailable
    repeat:
      - 15
      - 30
      - 60
    message: >
      - {{ expand(state_attr('sensor.alarm_sensors_unavailable','entities'))|map(attribute='entity_id')|join('\n- ') }}"
    notifiers:
      - admins

  # TODO:
  # battery_sensors_critical:
  #   name: Critical battery powered sensors are low.
  #   entity_id: binary_sensor.battery_sensors_critical
  #   notifiers:
  #     - admins
